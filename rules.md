# 汕尾五一旅游路线规划原则

## 基本规则

### 1. 时间规划
- 每天行程分为三个时间段：
  - 上午 (morning): 12时前
  - 下午 (afternoon): 12时-17时
  - 晚上 (evening): 17时后
- 每个时间段安排1-2个景点
- 考虑景点的开放时间，优先安排在对应的时间段

### 2. 距离考虑
- 以住宿地点为中心进行规划
- 50公里内的景点得分较高，超过50公里的景点得分递减
- 距离评分占总分的40%

### 3. 时间匹配度
- 时间匹配度占总分的60%
- 评分规则：
  - 完全匹配（如上午活动安排在上午）：得分1.0
  - 相邻时段（如上午活动安排在下午）：得分0.5
  - 不相邻时段：得分0.0
  - 全天活动：得分0.5

## 活动时间解析

### 1. 支持的时间格式
- 单日活动：`5月1日`
- 同月份范围：`5月1日 - 3日`
- 跨月份范围：`5月1日 - 5月3日`
- 每日固定时间：`每天10时至17时`
- 具体时间段：`10时至17时`

### 2. 活动持续时间
- 有明确时间的活动：按实际时间计算
- 无具体时间的活动：默认2小时

## 路线生成算法

### 1. 单日行程生成
1. 按时间段（上午/下午/晚上）分别规划
2. 每个时间段：
   - 筛选当天可用的景点
   - 计算距离分数和时间匹配分数
   - 选择综合得分最高的1-2个景点

### 2. 多日行程生成
1. 按天数循环规划
2. 每天按单日行程逻辑规划
3. 额外考虑：
   - 避免重复景点
   - 考虑活动的有效期
   - 平衡各天的行程安排

## 评分系统

### 1. 距离分数计算
- 计算公式：1 - min(实际距离/50km, 1)
- 距离≤50km：线性递减
- 距离>50km：固定最低分

### 2. 时间匹配分数
- 完全匹配：1.0
- 相邻时段：0.5
- 不相邻时段：0.0
- 全天活动：0.5

### 3. 综合评分
- 最终得分 = 距离分数 × 40% + 时间匹配分数 × 60%
- 按得分从高到低排序选择景点

## 特殊考虑

### 1. 活动类型适配
- 考虑不同类型活动的特点
- 文化展览类：适合上午/下午
- 演出活动：适合下午/晚上
- 户外活动：适合上午/下午

### 2. 节假日因素
- 考虑五一假期特殊活动
- 优先安排限时活动
- 避开可能的高峰时段

### 3. 用户体验优化
- 合理分配每天的活动量
- 避免过于密集的行程安排
- 预留足够的交通时间 